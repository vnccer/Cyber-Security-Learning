## 一、笑脸漏洞利用过程
- ftp 192.168.174.130  
- :)  
- nc 192.168.174.130 6200

## 二、验证
<img width="219" height="67" alt="image" src="https://github.com/user-attachments/assets/a80e9869-3abf-434d-9d4a-66fa96b62635" /> 

## 三、总结
- 触发  
VSFTPD服务器监听21端口，当一个FTP客户端连接上并发送用户名带有“:)”符号，则跳过正常的认证流程，转到“激活阶段”。
- 激活  
程序调用隐藏的程序，调用fork()系统创建自己的子进程，具备隐蔽性（主进程VSFTPD服务可运行or退出，而新子进程后台独立运行），此子进程会创建一个新的TCP Socket，并将其绑定在一个硬编码在代码里的端口号：6200，然后开始在端口上监听，等待外部连接。而原本的FTP会话(21端口)因逻辑被中断而卡住或断开。
- 执行  
nc命令连接到6200端口时，后台子进程的accept()函数被触发，表示连接已建立，接着重定向输入输出，子进程会使用dup2()这个系统调用进行：将标准输入重定向到刚刚建立的网络连接、将标准输出重定向到此网络连接、将标准错误重定向到此网络连接，效果是：对接下来要运行的任何程序，它的“键盘输入”不再来自物理键盘，而是网络；“屏幕输出”也不再显示在屏幕上，而是全部发送到网络。最后子进程调用execve()来执行Shell。（由于VSFTPD服务在Metasploitable2上是以root用户身份启动的，它fork出来的子进程也继承了root权限，因此这里执行的是root Shell）
