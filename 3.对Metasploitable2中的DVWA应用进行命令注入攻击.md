## 一、实验环境
http://192.168.174.130/dvwa/
## 二、使用工具
firefox浏览器、Burp Suite
## 三、实验过程
### 3.1登录攻击目标——DVWA
- 访问DVWA：
   - Kali中打开firfox
   - 输入http://192.168.174.130/dvwa/
   - 用户名admin，密码password
- 降低安全级别
   - DVWA Security中设置low
### 3.2漏洞利用——黑掉网站
- Command Execution理解
   - 正常功能：输入127.0.0.1，submit，返回ping命令结果  

  <img width="445" height="305" alt="image" src="https://github.com/user-attachments/assets/b2191c9f-3e0f-4b80-baf9-fe154024b46e" />  
  
   - 漏洞推测：此功能是ping的系统命令，若对输入不作过滤，可以尝试127.0.0.1后再加入命令
- 构造Payload并攻击
   - 输入框中输入127.0.0.1; ls，列出当前目录下文件的命令，若成功，会在结果下方看到遗传文件名，证明漏洞存在
   - 目标是提取/etc/passwd文件，因此构建Payload：127.0.0.1; cat /etc/passwd
   - 页面显示服务器的passwd文件内容
- 利用Burp Suite分析
   - Kali的firefox设置中，网络代理设置为手动，HTTP代理地址为127.0.0.1，端口为8080
   - 打开Kali中的Burp Suite，在**Proxy**→**Intercept**标签页，确保Intercept is on
   - 返回firefox，DVWA命令注入页面中，再次提交Payload
   - 发现Burp Suite被拦截，可以看到浏览器发送给服务器的原始HTTP请求，且可以任意修改
## 四、反思
- Linux/Unix系统，用;或|连接两条命令，cat显示文件内容
- Exploit（漏洞利用）=钥匙/开锁的方法
- Payload（有效载荷）=开锁后，干的坏事
- 坏事如：
   - 给我一个命令行（shell）
   - 给我一个超级工具箱（meterpreter）
   - 在对方屏幕上弹出计算机（exec calc.exe）
   - 偷走密码（download etc/passwd）
- VSFTPD例子中，发送:)笑脸的总做是Exploit，在目标机上打开6200端口，并给我一个root Shell的代码是那次攻击的Payload
- Burp Suite 是“中间人”，控制浏览器和目标网站之间的通信数据，主要：Web应用（网站、app、api），而Metasploit主要：服务器、操作系统
- DVWA(Damn Vulnerable Web Application)，<http://192.168.174.130/dvwa>，访问的是Metasploitable2这台服务器上的DVWA漏洞练习网站
- 127.0.0.1（本地回环地址）（localhost），指向机器自己，DVWA中输入并提交，并非用Kali取ping，而是命令Web服务器Metasploitable2自己ping自己。
- 养成习惯，每次用完Burp Suite后，把浏览器的代理设置改回“不使用代理”，下次再用时候改回“手动代理配置”。
- 第16行，原本是要执行127.0.0.1;cat /etc/passwd，在软件中为ip=127.0.0.1%3Bcat+%2Fetc%2Fpasswd&submit=submit，我想破坏，改为127.0.0.1;ls -la /etc/passwd（用列表显示/etc/passwd这个文件的详细信息），那么应该改为ip=127.0.0.1;ls -la /etc/passwd&submit=submit，因为在Burp Suite中，可以直接输入空格，会在发送时自动转换成+号。
- 测试：进入Burp Suite的Repeater标签页，找到第16行修改为新的Payload：ip=127.0.0.1; echo "MY_TEST_IS_SUCCESSFUL"，在右侧的Response窗口搜索"MY_TEST_IS_SUCCESSFUL"
